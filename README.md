# Музейная Информационная Система

Проект представляет собой веб-приложение для управления музейными экспонатами, включающее серверную часть (API) и клиентскую часть (веб-сайт).

## Содержание

- [Обзор](#обзор)
- [Требования](#требования)
- [Установка](#установка)
- [Настройка](#настройка)
- [Запуск](#запуск)
- [Структура проекта](#структура-проекта)
- [API Документация](#api-документация)
- [Устранение неполадок](#устранение-неполадок)

## Обзор

Система предназначена для управления музейными экспонатами, их описаниями, изображениями, а также включает игровые механики для посетителей. Основные компоненты:

- **База данных PostgreSQL** - хранит информацию об экспонатах, сотрудниках, играх и результатах.
- **API сервис** - .NET приложение, предоставляющее RESTful API.
- **Веб-клиент** - Vue.js приложение для взаимодействия с системой.

## Требования

Для успешной работы с проектом необходимы:

- PostgreSQL 17.0 или выше
- .NET 9.0 SDK или выше
- Node.js 14.0 или выше
- npm 6.0 или выше

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/icepow-r/Museum.git
cd Museum
```

### 2. Настройка базы данных

1. Создайте пустую базу данных в PostgreSQL:

```bash
psql -U postgres
CREATE DATABASE m2;
\q
```

2. Импортируйте структуру и данные из файла database.sql:

```bash
psql -U postgres -d m2 -f database.sql
```

### 3. Настройка API сервиса

Перейдите в директорию API сервиса:

```bash
cd MuseumService
```

Восстановите зависимости и соберите проект:

```bash
dotnet restore
dotnet build
```

### 4. Настройка веб-клиента

Перейдите в директорию веб-клиента:

```bash
cd ../museum
```

Установите зависимости:

```bash
npm install
```

## Настройка

### Настройка соединения с базой данных

1. Откройте файл `MuseumService/MuseumService/appsettings.json` и убедитесь, что строка подключения соответствует вашим настройкам PostgreSQL:

```json
"ConnectionStrings": {
  "DefaultConnection": "Host=localhost;Port=5432;Database=m2;Username=postgres;Password=postgres"
}
```

Замените `Username` и `Password` на ваши учетные данные PostgreSQL, если они отличаются.

### Настройка клиента

1. Откройте файл `museum/.env` и настройте API URL:

```
VITE_API_LINK=localhost:5063
```

При необходимости измените порт на тот, который использует ваш API сервис.

## Запуск

### 1. Запуск API сервиса

Из корневого каталога проекта:

```bash
cd MuseumService/MuseumService
dotnet run
```

API будет доступен по адресу `http://localhost:5063` (или другой порт, если он изменен в настройках).

### 2. Запуск веб-клиента

В отдельном терминале, из корневого каталога проекта:

```bash
cd museum
npm run dev
```

Клиентская часть будет доступна по адресу, указанному в терминале (обычно `http://localhost:5173`).

## Структура проекта

- `/database.sql` - SQL-скрипт для создания базы данных
- `/MuseumService/` - Серверная часть (API) на .NET
- `/museum/` - Клиентская часть на Vue.js

## API Документация

API-эндпоинты доступны по адресу `http://localhost:5063`. Основные endpoints:

- `GET /api/exhibits` - получить список всех экспонатов
- `GET /api/exhibits/{id}` - получить информацию по конкретному экспонату
- `POST /api/auth/login` - аутентификация пользователя

## Учетные данные по умолчанию

Система поставляется с предустановленными учетными записями:

- Логин: `admin`
- Пароль: `password123`


## Устранение неполадок

### Проблемы с подключением к базе данных

1. Убедитесь, что PostgreSQL запущен и принимает соединения.
2. Проверьте правильность строки подключения в `appsettings.json`.
3. Убедитесь, что база данных `m2` создана и содержит все необходимые таблицы.

### Проблемы с API

1. Проверьте, что API запущен и доступен по указанному адресу и порту.
2. Проверьте логи в консоли запуска API для выявления возможных ошибок.

### Проблемы с веб-клиентом

1. Убедитесь, что в файле `.env` правильно указан адрес API.
2. Проверьте, что все зависимости установлены (`npm install`).
3. Убедитесь, что используемая версия Node.js совместима с проектом. 